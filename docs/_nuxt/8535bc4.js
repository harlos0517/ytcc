/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[13,4,5,10,11],{384:function(e,t,n){"use strict";n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return v}));var r=n(48),c=function(){return Object(r.axiosRequest)(r.METHODS.POST,"/video")},o=function(e){return Object(r.axiosRequest)(r.METHODS.GET,"/video/".concat(e,"/tracks/public"))},l=function(){return Object(r.axiosRequest)(r.METHODS.GET,"/videos/me")},d=function(e){return Object(r.axiosRequest)(r.METHODS.GET,"/video/"+e)},v=function(e){return Object(r.axiosRequest)(r.METHODS.GET,"/video/".concat(e,"/tracks"))}},388:function(e,t,n){var content=n(393);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(114).default)("f62ec356",content,!0,{sourceMap:!1})},390:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"a",(function(){return v}));var r=n(48),c=function(e){return Object(r.axiosRequest)(r.METHODS.GET,"/track/"+e)},o=function(e){return Object(r.axiosRequest)(r.METHODS.GET,"/track/".concat(e,"/infos"))},l=function(){return Object(r.axiosRequest)(r.METHODS.POST,"/track")},d=function(){return Object(r.axiosRequest)(r.METHODS.PUT,"/track")},v=function(e){return Object(r.axiosRequest)(r.METHODS.DELETE,"/track/"+e)}},392:function(e,t,n){"use strict";n(388)},393:function(e,t,n){var r=n(113)(!1);r.push([e.i,".flex-column[data-v-46f3de0d],.flex-row[data-v-46f3de0d]{display:flex}.middle-center[data-v-46f3de0d]{justify-content:center;align-items:center}.stretch-center[data-v-46f3de0d]{justify-content:center;align-items:stretch}.fill-screen[data-v-46f3de0d]{width:100%;height:100vh}#video-subs[data-v-46f3de0d]{bottom:0;pointer-events:none}#video-subs span[data-v-46f3de0d]{background-color:rgba(0,0,0,.73333);border-radius:5px}",""]),e.exports=r},395:function(e,t,n){var content=n(407);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(114).default)("ba1614d4",content,!0,{sourceMap:!1})},396:function(e,t,n){var content=n(409);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(114).default)("45aed2df",content,!0,{sourceMap:!1})},399:function(e,t,n){"use strict";n.r(t);var r=n(27),c=(n(67),n(112)),o=n(149),l=Object(c.b)({props:{videoId:{type:String,required:!0},activeSubs:{type:Array,required:!0},changeState:{type:Function,required:!0},playing:{type:Function,default:null},ready:{type:Function,default:null},paused:{type:Function,default:null},ended:{type:Function,default:null},buffering:{type:Function,default:null},cued:{type:Function,default:null}},setup:function(e){var t=Object(c.g)(e),n=t.changeState,l=t.playing,d=t.ready,v=t.paused,f=t.ended,m=t.buffering,h=t.cued,x=Object(c.e)(null),k=Object(c.a)((function(){var e;return null===(e=x.value)||void 0===e?void 0:e.player})),y=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,null===(r=k.value)||void 0===r?void 0:r.getPlayerState();case 3:if(e.t1=e.sent,e.t1){e.next=6;break}e.t1=o.a.UNSTARTED;case 6:e.t2=e.t1,e.t0.value.call(e.t0,e.t2),d.value&&d.value();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.value(o.a.VIDEO_CUED),h.value&&h.value();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{youtube:x,player:k,onReady:y,onPlaying:function(e){n.value(o.a.PLAYING),l.value&&l.value()},onPaused:function(e){n.value(o.a.PAUSED),v.value&&v.value()},onEnded:function(e){n.value(o.a.ENDED),f.value&&f.value()},onBuffering:function(e){n.value(o.a.BUFFERING),m.value&&m.value()},onCued:T}}}),d=l,v=(n(392),n(77)),component=Object(v.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"position-relative flex-fill",attrs:{id:"video-view"}},[n("youtube",{ref:"youtube",attrs:{"video-id":e.videoId,resize:"",width:"100%",height:"100%",resizeDelay:1,fitParent:""},on:{playing:e.onPlaying,ready:e.onReady,paused:e.onPaused,ended:e.onEnded,buffering:e.onBuffering,cued:e.onCued}}),n("div",{staticClass:"w-100 position-absolute text-center h3",attrs:{id:"video-subs"}},e._l(e.activeSubs,(function(sub){return n("div",[n("span",[e._v(e._s(sub.text))])])})),0)],1)}),[],!1,null,"46f3de0d",null);t.default=component.exports},403:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(34),c=n(35),o=(n(19),n(143),n(391),n(1),n(3),function(){function e(data){Object(r.a)(this,e),this.data=[],data&&this.insertMany(data)}return Object(c.a)(e,[{key:"insertMany",value:function(e){return e.map(this.insert.bind(this))}},{key:"insert",value:function(sub){var e=sub._id,t=sub.startTime,n=sub.endTime,text=sub.text;if(void 0===n)throw new TypeError("Invalid end time.");for(var r={_id:e,startTime:t,endTime:n,text:text,next:null,prev:null,active:!1},c=null,o=this.data[0]||null,i=0;o&&o.endTime<=r.endTime;)c=o,o=o.next||null,i++;o&&(r.endTime=Math.min(r.endTime,o.startTime));var l=c?c.endTime:0;return r.startTime=Math.max(l,r.startTime),r.endTime-r.startTime<.1?(console.error("Time segment too small."),null):(r.next=o,r.prev=c,c&&(c.next=r),o&&(o.prev=r),this.data.splice(i,0,r),r)}},{key:"delete",value:function(sub){var i=this.data.findIndex((function(s){return s._id===sub._id}));if(i<0)throw new Error("This sub does not exist on this Subtitles.");sub.next&&(sub.next.prev=sub.prev),sub.prev&&(sub.prev.next=sub.next),this.data.splice(i,1)}},{key:"setActive",value:function(time){this.data.forEach((function(sub){sub.active=time>=sub.startTime&&time<sub.endTime}))}}],[{key:"fromInfos",value:function(e){return new this(e.map((function(e){return{_id:e._id,startTime:e.startTime,endTime:e.endTime||0,text:e.text}})))}}]),e}())},406:function(e,t,n){"use strict";n(395)},407:function(e,t,n){var r=n(113)(!1);r.push([e.i,".flex-column[data-v-620135e8],.flex-row[data-v-620135e8]{display:flex}.middle-center[data-v-620135e8]{justify-content:center;align-items:center}.stretch-center[data-v-620135e8]{justify-content:center;align-items:stretch}.fill-screen[data-v-620135e8]{width:100%;height:100vh}.sub-item[data-v-620135e8]:hover{background:#23272b}",""]),e.exports=r},408:function(e,t,n){"use strict";n(396)},409:function(e,t,n){var r=n(113)(!1);r.push([e.i,".flex-column[data-v-3693ad72],.flex-row[data-v-3693ad72]{display:flex}.middle-center[data-v-3693ad72]{justify-content:center;align-items:center}.stretch-center[data-v-3693ad72]{justify-content:center;align-items:stretch}.fill-screen[data-v-3693ad72]{width:100%;height:100vh}#help[data-v-3693ad72]{left:20%;right:20%;top:10%;bottom:10%;background-color:rgba(0,0,0,.86667);z-index:20}#help>.wrap[data-v-3693ad72]{max-height:100%;overflow:auto}#help #help-close[data-v-3693ad72]{right:1.5rem;top:1rem}",""]),e.exports=r},412:function(e,t,n){var content=n(427);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(114).default)("587e7ff7",content,!0,{sourceMap:!1})},417:function(e,t,n){"use strict";n.r(t);var r=n(112),c=Object(r.b)({props:{triggerHelp:{type:Function,required:!0},downloadSRT:{type:Function,required:!0},importSRT:{type:Function,required:!0},uploadSRT:{type:Function,required:!0}},setup:function(){return{}}}),o=n(77),component=Object(o.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"p-2 d-flex flex-row align-items-center",attrs:{id:"header"}},[n("div",{staticClass:"flex-fill h2 m-0"},[e._v("YTCC")]),n("button",{staticClass:"btn btn-secondary m-1",on:{click:e.downloadSRT}},[e._v("Export SRT")]),n("button",{staticClass:"btn btn-secondary m-1",on:{click:e.uploadSRT}},[e._v("Import SRT")]),n("a",{staticClass:"d-none",attrs:{id:"export"}}),n("input",{staticClass:"d-none",attrs:{id:"import",type:"file"},on:{change:e.importSRT}}),n("button",{staticClass:"btn btn-secondary m-1",on:{click:e.triggerHelp}},[e._v("Help")])])}),[],!1,null,"314ee1ee",null);t.default=component.exports},420:function(e,t,n){"use strict";n.r(t);var r=n(27),c=(n(67),n(28),n(112)),o=n(390),l=Object(c.b)({props:{track:{type:Object,required:!0}},setup:function(e){var track=Object(c.g)(e).track,t=Object(c.h)().$api,n=Object(c.e)(track.value.name),l=Object(c.e)(track.value.public),d=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(Object(o.e)())({name:n.value,_id:r});case 2:track.value.name=n.value;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(Object(o.e)())({public:l.value,_id:n});case 2:track.value.public=l.value;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.l)(track,(function(e){n.value=e.name,l.value=e.public})),{trackName:n,trackPublic:l,updateTrackName:d,updateTrackPublic:v}}}),d=l,v=n(77),component=Object(v.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"my-1"},[n("b-input-group",{attrs:{size:"md",prepend:"Name"}},[n("b-form-input",{on:{blur:function(t){return e.updateTrackName(e.track._id)}},model:{value:e.trackName,callback:function(t){e.trackName=t},expression:"trackName"}})],1),n("b-form-checkbox",{on:{change:function(t){return e.updateTrackPublic(e.track._id)}},model:{value:e.trackPublic,callback:function(t){e.trackPublic=t},expression:"trackPublic"}},[e._v("Public")])],1)}),[],!1,null,"52d9f6d9",null);t.default=component.exports},421:function(e,t,n){"use strict";n.r(t);n(183);var r=n(112),c=n(389),o=n(383),l=Object(r.b)({props:{videoLength:{type:Number,default:60},subtitle:{type:Object,required:!0},seek:{type:Function,required:!0},deleteInSub:{type:Function,required:!0}},setup:function(e){var t=Object(r.h)().$api,n=Object(r.g)(e),l=n.videoLength,d=n.subtitle,v=n.deleteInSub,f=Object(r.e)(null),m=Object(r.e)(50),h=function(){var e=f.value;m.value=e?e.scrollHeight+2:50};return Object(r.d)((function(){h()})),{textareaRef:f,textareaHeight:m,saveSubtitle:function(){d.value._id&&t(Object(c.c)())([{_id:d.value._id,startTime:d.value.startTime,endTime:d.value.endTime,text:d.value.text}])},deleteSubtitle:function(){v.value(d.value),d.value._id&&t(Object(c.a)([d.value._id]))()},changeHeight:h,timeDisplay:function(time){return Object(o.a)(time,l.value>3600)}}}}),d=(n(406),n(77)),component=Object(d.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"btn btn-dark my-1 p-2 d-flex flex-row align-items-center rounded",class:{"bg-secondary":e.subtitle.active}},[n("div",{staticClass:"time mr-2 text-monospace small",on:{click:function(t){return e.seek(e.subtitle.startTime)}}},[n("div",{staticClass:"start-time"},[n("span",[e._v(e._s(e.timeDisplay(e.subtitle.startTime)))])]),n("div",{staticClass:"end-time"},[n("span",[e._v(e._s(e.timeDisplay(e.subtitle.endTime)))])])]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.subtitle.text,expression:"subtitle.text"}],ref:"textareaRef",staticClass:"text p-0 bg-dark text-white flex-fill me-3",style:{height:e.textareaHeight+"px"},attrs:{placeholder:"Enter Subtitles Here"},domProps:{value:e.subtitle.text},on:{blur:e.saveSubtitle,input:[function(t){t.target.composing||e.$set(e.subtitle,"text",t.target.value)},e.changeHeight],change:e.changeHeight}}),n("button",{staticClass:"btn-close close btn-close-white",attrs:{type:"button","aria-label":"Close"},on:{click:function(t){return e.deleteSubtitle(e.subtitle)}}},[n("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])])}),[],!1,null,"620135e8",null);t.default=component.exports},422:function(e,t,n){"use strict";n.r(t);var r=n(112),c=Object(r.b)({props:{triggerHelp:{type:Function,required:!0}}}),o=(n(408),n(77)),component=Object(o.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"position-absolute rounded",attrs:{id:"help"}},[e._m(0),n("button",{staticClass:"btn-close close btn-close-white position-absolute",attrs:{id:"help-close",type:"button","aria-label":"Close"},on:{click:e.triggerHelp}},[n("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])])}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrap p-5"},[n("h3",{staticClass:"text-warning"},[n("b",[e._v("Y")]),e._v("ou"),n("b",[e._v("T")]),e._v("ube Video\n"),n("b",[e._v("C")]),e._v("losed\n"),n("b",[e._v("C")]),e._v("aption Tool")]),n("p",[e._v('YTCC is a project aiming to be an online collaboratable closed caption editing tool for YouTube videos.\nThe ultimate goal of this project is to let people understand videos and alike from all over the world,\nstimulating "'),n("a",{attrs:{href:"https://www.youtube.com/watch?v=tIU0xG-lXkQ&t=5917s",target:"_blank"}},[e._v("culture cross-pollination")]),e._v('".')]),n("h4",{staticClass:"text-danger"},[e._v("[ WARNING ]")]),n("p",[e._v("This website is still in testing state and may be unstable.\nThe subtitles you created are not guaranteed to be well preserved.\nRemember to Export SRT once in a while to ensure you don't lose your subtitles.\n")]),n("h4",{staticClass:"text-info"},[e._v("[ Keyboard Shortcuts ]")]),n("span",[e._v("These only work when focus is outside the video player.")]),n("ul",[n("li",[e._v("Ctrl + Space : Play / Pause")]),n("li",[e._v("Ctrl + Enter : Add subtitles")]),n("li",[e._v("Ctrl + E : Export SRT")]),n("li",[e._v("Ctrl + I : Import SRT")]),n("li",[e._v("Ctrl + H : Help")]),n("li",[e._v("(Timeline) mousewheel : Scroll")]),n("li",[e._v("(Timeline) Ctrl + mousewheel : Zoom")]),n("li",[e._v("(Timeline) drag : Move Subtitle")])]),n("h4",{staticClass:"text-info"},[e._v("[ Planning Features ]")]),n("ul",[n("li",[e._v("Audio Render from backend & auto CC time generate")]),n("li",[e._v("CC font color, style, position")]),n("li",[e._v("CC collab/translation")])]),n("h4",{staticClass:"text-info"},[e._v("[ About ]")]),n("p",[e._v("This webpage is created and designed by\n"),n("a",{attrs:{href:"https://hackmd.io/@DeemoHarlos/share",target:"_blank"}},[e._v("Deemo Harlos")]),n("br"),e._v("This is an open-source project.\nThis means ANYONE can contribute to this project,\neither by testing, discussing, reporting issues, giving advices or create pull requests."),n("br"),n("a",{attrs:{href:"https://github.com/DeemoHarlos/ytcc",target:"_blank"}},[e._v("Github Repo")]),e._v(" |\n"),n("a",{attrs:{href:"https://github.com/DeemoHarlos/ytcc/issues/new",target:"_blank"}},[e._v("Report Bugs or Issues")]),n("br"),n("br"),e._v("Buy me a coffee! Thanks for your support!\n"),n("a",{attrs:{href:"https://ko-fi.com/harlosmusic",target:"_blank"}},[e._v("Ko-fi")]),e._v(" |\n"),n("a",{attrs:{href:"https://www.patreon.com/HarlosMusic",target:"_blank"}},[e._v("Patreon")]),n("br"),e._v("(Yes that's me, I also make a living from music!)"),n("br"),e._v("Contact me on\n"),n("a",{attrs:{href:"https://twitter.com/HarlosMusic",target:"_blank"}},[e._v("Twitter")]),e._v("\nor\n"),n("a",{attrs:{href:"https://discord.gg/6r4bvhr",target:"_blank"}},[e._v("Discord")])])])}],!1,null,"3693ad72",null);t.default=component.exports},426:function(e,t,n){"use strict";n(412)},427:function(e,t,n){var r=n(113)(!1);r.push([e.i,".flex-column[data-v-1f453e5c],.flex-row[data-v-1f453e5c]{display:flex}.middle-center[data-v-1f453e5c]{justify-content:center;align-items:center}.stretch-center[data-v-1f453e5c]{justify-content:center;align-items:stretch}.fill-screen[data-v-1f453e5c]{width:100%;height:100vh}#video[data-v-1f453e5c]{flex:3 0 0}#subtitle[data-v-1f453e5c]{flex:1 0 0}#subtitle #tracks a.nav-link.btn[data-v-1f453e5c]:not(.active){color:#fff}#video-subs[data-v-1f453e5c]{bottom:0;pointer-events:none}#video-subs span[data-v-1f453e5c]{background-color:rgba(0,0,0,.73333);border-radius:5px}#subs[data-v-1f453e5c]{overflow-y:auto}#add-track-btn[data-v-1f453e5c]{text-decoration:none;color:inherit}",""]),e.exports=r},437:function(e,t,n){"use strict";n.r(t);n(5),n(4),n(6),n(7);var r=n(0),c=n(27),o=(n(67),n(148),n(1),n(400),n(402),n(19),n(2),n(143),n(391),n(3),n(50),n(52),n(424),n(185),n(21),n(112)),l=n(384),d=n(389),v=n(390),f=n(149),m=n(403),h=n(383);n(385),n(43),n(17),n(13),n(23),n(31);function x(time){var e=time.split(":");try{var s=e[2].split(",");return 1===s.length&&(s=e[2].split(".")),3600*parseFloat(e[0],10)+60*parseFloat(e[1],10)+parseFloat(s[0],10)+parseFloat(s[1],10)/1e3}catch(e){return 0}}function k(e,t){for(var n=t;!e[n];)n++;return n}function y(e){for(var t=e.length-1;t>=0&&!e[t];)t--;return t}function T(){for(var time,text,sub,data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=[],t=data.split(/(?:\r\n|\r|\n)/gm),n=y(t)+1,r=0,i=0;i<n;i++){for(sub={},text=[],i=k(t,i),sub.id=parseInt(t[i++],10),time=t[i++].split(/[\t ]*-->[\t ]*/),sub.startTime=x(time[0]),-1!==(r=time[1].indexOf(" "))&&(time[1]=time[1].substr(0,r)),sub.endTime=x(time[1]);i<n&&t[i];)text.push(t[i++]);sub.text=text.join("\\N").replace(/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,""),sub.text=sub.text.replace(/</g,"&lt;").replace(/>/g,"&gt;"),sub.text=sub.text.replace(/&lt;(\/?(font|b|u|i|s))((\s+(\w|\w[\w-]*\w)(\s*=\s*(?:".*?"|'.*?'|[^'">\s]+))?)+\s*|\s*)(\/?)&gt;/gi,"<$1$3$7>"),sub.text=sub.text.replace(/\\N/gi,"<br />"),e.push(sub)}return e}var _=function(time){var e=Object(h.b)(time),t=Math.floor(e/3600).toString().padStart(2,"0"),n=Math.floor(e%3600/60).toString().padStart(2,"0"),r=Math.floor(e%60).toString().padStart(2,"0"),c=Math.floor(1e3*e%1e3).toString().padStart(3,"0");return"".concat(t,":").concat(n,":").concat(r,",").concat(c)};function w(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function O(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?w(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):w(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var j=Object(o.b)({setup:function(){var e=Object(o.i)(),t=Object(o.j)(),n=e.value.query.videoId,video=Object(o.e)(null),r=Object(o.h)().$api,x=Object(o.e)(null),k=Object(o.a)((function(){var e;return null===(e=x.value)||void 0===e?void 0:e.player})),y=Object(o.e)(void 0),w=Object(o.e)(!1),j=Object(o.e)(""),R=Object(o.e)(60),cursor=Object(o.e)(0),S=Object(o.e)([]),C=Object(o.e)(""),E=Object(o.a)((function(){return S.value.find((function(e){return e._id===C.value}))})),I=Object(o.a)((function(){var e;return(null===(e=E.value)||void 0===e?void 0:e.subs.data)||[]})),H=Object(o.a)((function(){return S.value.map((function(e){return e.subs.data.filter((function(e){return e.active})).reverse()})).flat()})),D=Object(o.e)(null),M=Object(o.e)([]),P=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=k.value)||void 0===t?void 0:t.getDuration();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=60;case 5:R.value=e.t0;case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=k.value)||void 0===t?void 0:t.getDuration();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=60;case 5:R.value=e.t0;case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(){var track;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(Object(v.d)())({videoId:n});case 2:track=e.sent,S.value.push(O(O({},track),{},{subs:new m.a})),C.value=track._id||"";case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t,i){var n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!confirm("Are you sure to delete this track?")){e.next=5;break}return e.next=3,r(Object(v.a)(t))();case 3:S.value.splice(i,1),C.value=(null===(n=S.value[i])||void 0===n?void 0:n._id)||(null===(c=S.value[i-1])||void 0===c?void 0:c._id)||"";case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),A=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(){var t,c,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E.value){e.next=2;break}return e.abrupt("return");case 2:if(t=[{text:"",startTime:Math.max(0,cursor.value-1),endTime:cursor.value}],!E.value.subs){e.next=10;break}return c=E.value.subs.insertMany(t),o=c.filter((function(s){return s})),e.next=8,r(Object(d.b)())(o.map((function(sub){return{videoId:n,trackId:C.value,startTime:sub.startTime,endTime:sub.endTime,text:sub.text}})));case 8:e.next=11;break;case 10:E.value.subs=new m.a(t);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=k.value)||void 0===t?void 0:t.getCurrentTime();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=0;case 5:cursor.value=e.t0;case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(){var t,n,r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=k.value,!e.t0){e.next=6;break}return e.next=4,k.value.getPlayerState();case 4:e.t1=e.sent,e.t0=1===e.t1;case 6:if(!e.t0){e.next=10;break}r=I.value.findIndex((function(s){return s.active})),(c=null===(t=M.value[r])||void 0===t?void 0:t.$el)&&D.value&&!V(c,D.value)&&(null===(n=M.value[r])||void 0===n||n.$el.scrollIntoView());case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(e,t){var rect=e.getBoundingClientRect(),n=t.getBoundingClientRect();return rect.top>=n.top&&rect.left>=n.left&&rect.bottom<=n.bottom&&rect.right<=n.right},B=function e(){L(),G(),window.requestAnimationFrame(e)},U=function(e,t,n){window.addEventListener("keydown",(function(r){r.key===e&&t===r.ctrlKey&&(r.preventDefault(),n())}))},Y=function(){var e,t;1!==y.value?null===(e=k.value)||void 0===e||e.playVideo():null===(t=k.value)||void 0===t||t.pauseVideo()},z=function(){w.value=!w.value},K=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(){var o,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r(Object(l.b)(n))();case 3:video.value=e.sent,e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(0),"Not Authenticated"!==e.t0){e.next=11;break}return t.push("/"),e.abrupt("return");case 11:return e.next=13,r(Object(l.d)(n))();case 13:d=e.sent,S.value=d.map((function(e){return O(O({},e),{},{subs:new m.a})})),C.value=(null===(o=S.value[0])||void 0===o?void 0:o._id)||"",S.value.forEach(function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(Object(v.c)(t._id))();case 2:n=e.sent,t.subs.insertMany(n.map((function(sub){return{_id:sub._id,startTime:sub.startTime,endTime:sub.endTime||0,text:sub.text}})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 17:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();Object(o.d)((function(){K(),U("Enter",!0,A),U(" ",!0,Y),U("e",!0,J),U("i",!0,Q),U("h",!0,z),B()}));var J=function(){var e=I.value.filter((function(sub){return sub.text.replace("\n","").length})).map((function(sub,i){return"".concat(i+1,"\n").concat(_(sub.startTime)," --\x3e ").concat(_(sub.endTime),"\n").concat(sub.text.split("\n").filter((function(e){return e.length})).join("\n"),"\n\n")})).join(""),t=new Blob([e],{type:"text/plain"}),r=document.querySelector("#export");r.download="Youtube_".concat(n,".srt"),r.href=URL.createObjectURL(t),r.dataset.downloadurl=["text/plain",r.download,r.href].join(":"),r.click()},Q=function(){var e=document.querySelector("#import");null==e||e.click()},W=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(){var t,c,o,l,f,track;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((o=document.querySelector("#import")).files&&o.files.length){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,null===(t=o.files[0])||void 0===t?void 0:t.text();case 5:return l=e.sent,f=T(l),e.next=9,r(Object(v.d)())({videoId:n});case 9:return track=e.sent,S.value.push(O(O({},track),{},{subs:new m.a(f)})),C.value||(C.value=(null===(c=S.value[0])||void 0===c?void 0:c._id)||""),e.next=14,r(Object(d.b)())(f.map((function(sub){return O(O({},sub),{},{trackId:track._id,videoId:n})})));case 14:C.value=track._id,o.value="",j.value="IMPORTED";case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{video:video,tracks:S,curTrackId:C,curTrack:E,curSubs:I,activeSubs:H,subsRef:D,subRef:M,changeTrack:function(e){C.value=e},state:y,infoText:j,videoLength:R,playerRef:x,player:k,cursor:cursor,changeState:function(e){y.value=e,j.value=Object(f.c)(y.value)},onReady:P,onCued:F,getTimeText:function(time){return Object(h.a)(time,R.value>3600)},deleteTrack:$,newTrack:N,addSubtitle:A,deleteInSub:function(sub){return function(){var e;null===(e=E.value)||void 0===e||e.subs.delete(sub)}},seek:function(time){var e;null===(e=k.value)||void 0===e||e.seekTo(time,!0)},triggerHelp:z,showHelp:w,downloadSRT:J,uploadSRT:Q,importSRT:W}}}),R=j,S=(n(426),n(77)),component=Object(S.a)(R,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fill-screen flex-column bg-dark text-white"},[n("div",{attrs:{id:"top"}},[n("EditHeader",{attrs:{triggerHelp:e.triggerHelp,downloadSRT:e.downloadSRT,uploadSRT:e.uploadSRT,importSRT:e.importSRT}})],1),n("div",{staticClass:"flex-fill flex-row position-relative",attrs:{id:"mid"}},[n("div",{staticClass:"flex-column",attrs:{id:"video"}},[n("VideoView",{ref:"playerRef",attrs:{videoId:e.video?e.video.handle:"",activeSubs:e.activeSubs,changeState:e.changeState,ready:e.onReady,cued:e.onCued}}),n("EditTimeline",{attrs:{videoLength:e.videoLength,player:e.player,tracks:e.tracks,curTrackId:e.curTrackId,changeTrack:e.changeTrack}})],1),n("div",{staticClass:"flex-column px-2",attrs:{id:"subtitle"}},[n("div",{attrs:{id:"tracks"}},[n("ul",{staticClass:"nav nav-tabs"},[e._l(e.tracks,(function(t,i){return n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link btn",class:{active:t._id===e.curTrackId},on:{click:function(n){e.curTrackId=t._id}}},[n("span",[e._v(e._s(t.name))]),t._id===e.curTrackId?n("button",{staticClass:"btn-close close btn-close-white",attrs:{type:"button","aria-label":"Close"},on:{click:function(n){return e.deleteTrack(t._id,i)}}},[n("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]):e._e()])])})),n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",attrs:{id:"add-track-btn"},on:{click:e.newTrack}},[e.tracks.length?n("span",[e._v("+")]):n("span",[e._v("Add track")])])])],2)]),e.curTrack?n("EditTrackInfo",{attrs:{track:e.curTrack}}):e._e(),n("div",{ref:"subsRef",staticClass:"flex-fill position-relative",attrs:{id:"subs"}},[n("div",{staticClass:"wrap position-absolute w-100"},[e._l(e.curSubs,(function(sub,i){return n("EditSubtitle",{key:i,ref:"subRef",refInFor:!0,attrs:{subtitle:sub,seek:e.seek,videoLength:e.videoLength,deleteInSub:e.deleteInSub(sub)}})})),e.curTrackId?n("button",{staticClass:"btn btn-dark w-100 text-center p-3",attrs:{type:"button"},on:{click:function(t){return e.addSubtitle()}}},[e.curSubs.length?n("span",[e._v("+")]):n("span",[e._v("Add subtitle")])]):e._e()],2)]),n("div",{staticClass:"flex-row middle-center",attrs:{id:"toolbar"}},[n("span",{staticClass:"m-0 h2 text-monospace"},[e._v(e._s(e.getTimeText(e.cursor)))])])],1)]),n("div",{staticClass:"d-flex flex-row",attrs:{id:"bot"}},[n("span",[e._v(e._s(e.infoText))])]),e.showHelp?n("EditHelp",{attrs:{triggerHelp:e.triggerHelp}}):e._e()],1)}),[],!1,null,"1f453e5c",null);t.default=component.exports;installComponents(component,{EditHeader:n(417).default,VideoView:n(399).default,EditTimeline:n(436).default,EditTrackInfo:n(420).default,EditSubtitle:n(421).default,EditHelp:n(422).default})}}]);