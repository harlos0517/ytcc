(window.webpackJsonp=window.webpackJsonp||[]).push([[18,11],{384:function(e,t,r){"use strict";r.d(t,"e",(function(){return c})),r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return l})),r.d(t,"d",(function(){return f}));var n=r(48),c=function(){return Object(n.axiosRequest)(n.METHODS.POST,"/video")},o=function(e){return Object(n.axiosRequest)(n.METHODS.GET,"/video/".concat(e,"/tracks/public"))},d=function(){return Object(n.axiosRequest)(n.METHODS.GET,"/videos/me")},l=function(e){return Object(n.axiosRequest)(n.METHODS.GET,"/video/"+e)},f=function(e){return Object(n.axiosRequest)(n.METHODS.GET,"/video/".concat(e,"/tracks"))}},389:function(e,t,r){"use strict";r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return d})),r.d(t,"e",(function(){return l})),r.d(t,"a",(function(){return f}));var n=r(48),c=function(e){return Object(n.axiosRequest)(n.METHODS.GET,"/track/"+e)},o=function(e){return Object(n.axiosRequest)(n.METHODS.GET,"/track/".concat(e,"/infos"))},d=function(){return Object(n.axiosRequest)(n.METHODS.POST,"/track")},l=function(){return Object(n.axiosRequest)(n.METHODS.PUT,"/track")},f=function(e){return Object(n.axiosRequest)(n.METHODS.DELETE,"/track/"+e)}},393:function(e,t,r){var content=r(404);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(114).default)("02ccf3ca",content,!0,{sourceMap:!1})},394:function(e,t,r){"use strict";var n=r(9),c=r(79).findIndex,o=r(89),d="findIndex",l=!0;d in[]&&Array(1).findIndex((function(){l=!1})),n({target:"Array",proto:!0,forced:l},{findIndex:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}}),o(d)},396:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(34),c=r(35),o=(r(19),r(143),r(394),r(1),r(3),function(){function e(data){Object(n.a)(this,e),this.data=[],data&&this.insertMany(data)}return Object(c.a)(e,[{key:"insertMany",value:function(e){return e.map(this.insert.bind(this))}},{key:"insert",value:function(sub){var e=sub._id,t=sub.startTime,r=sub.endTime,text=sub.text;if(void 0===r)throw new TypeError("Invalid end time.");for(var n={_id:e,startTime:t,endTime:r,text:text,next:null,prev:null,active:!1},c=null,o=this.data[0]||null,i=0;o&&o.endTime<=n.endTime;)c=o,o=o.next||null,i++;o&&(n.endTime=Math.min(n.endTime,o.startTime));var d=c?c.endTime:0;return n.startTime=Math.max(d,n.startTime),n.endTime-n.startTime<.1?(console.error("Time segment too small."),null):(n.next=o,n.prev=c,c&&(c.next=n),o&&(o.prev=n),this.data.splice(i,0,n),n)}},{key:"delete",value:function(sub){var i=this.data.findIndex((function(s){return s._id===sub._id}));if(i<0)throw new Error("This sub does not exist on this Subtitles.");sub.next&&(sub.next.prev=sub.prev),sub.prev&&(sub.prev.next=sub.next),this.data.splice(i,1)}},{key:"setActive",value:function(time){this.data.forEach((function(sub){sub.active=time>=sub.startTime&&time<sub.endTime}))}}],[{key:"fromInfos",value:function(e){return new this(e.map((function(e){return{_id:e._id,startTime:e.startTime,endTime:e.endTime||0,text:e.text}})))}}]),e}())},403:function(e,t,r){"use strict";r(393)},404:function(e,t,r){var n=r(113)(!1);n.push([e.i,".flex-column[data-v-3621d1a0],.flex-row[data-v-3621d1a0]{display:flex}.middle-center[data-v-3621d1a0]{justify-content:center;align-items:center}.stretch-center[data-v-3621d1a0]{justify-content:center;align-items:stretch}.fill-screen[data-v-3621d1a0]{width:100%;height:100vh}#track-finder[data-v-3621d1a0]{left:20%;right:20%;top:10%;bottom:10%;background-color:rgba(0,0,0,.86667);z-index:20}#track-finder>.wrap[data-v-3621d1a0]{max-height:100%;overflow:auto}#track-finder #track-finder-close[data-v-3621d1a0]{right:1.5rem;top:1rem}",""]),e.exports=n},407:function(e,t,r){var content=r(423);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(114).default)("c78d37fa",content,!0,{sourceMap:!1})},415:function(e,t,r){"use strict";r.r(t);var n=r(27),c=(r(67),r(112)),video=r(384),o=Object(c.b)({props:{videoId:{type:String,required:!0},tracks:{type:Array,required:!0},triggerTrackFinder:{type:Function,required:!0},addTrack:{type:Function,required:!0},removeTrack:{type:Function,required:!0}},setup:function(e){var t=Object(c.h)().$api,r=Object(c.g)(e).videoId,o=Object(c.e)([]),d=Object(c.e)("");return Object(c.d)(Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(Object(video.c)(r.value))();case 2:o.value=e.sent;case 3:case"end":return e.stop()}}),e)})))),{trackList:o,selectedTrackId:d}}}),d=(r(403),r(77)),component=Object(d.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"position-absolute rounded",attrs:{id:"track-finder"}},[r("div",{staticClass:"wrap p-5"},[r("div",{staticClass:"row mb-3 mx-0"},[r("div",{staticClass:"col px-0"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedTrackId,expression:"selectedTrackId"}],staticClass:"w-100 h-100",on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.selectedTrackId=t.target.multiple?r:r[0]}}},[r("option",{attrs:{value:""}},[e._v("Please Select")]),e._l(e.trackList,(function(track){return r("option",{domProps:{value:track._id}},[e._v(e._s(track.name)+" - "+e._s(track.user.email))])}))],2)]),r("div",{staticClass:"col-auto px-0"},[r("button",{staticClass:"btn btn-primary",on:{click:function(t){return e.addTrack(e.selectedTrackId)}}},[e._v("ADD")])])]),e._l(e.tracks,(function(track){return r("div",{staticClass:"row mb-3"},[r("div",{staticClass:"col d-flex align-items-center"},[r("span",[e._v(e._s(track.name))])]),r("div",{staticClass:"col-auto"},[r("button",{staticClass:"btn btn-danger",on:{click:function(t){return e.removeTrack(track._id)}}},[e._v("REMOVE")])])])}))],2),r("button",{staticClass:"btn-close close btn-close-white position-absolute",attrs:{id:"track-finder-close",type:"button","aria-label":"Close"},on:{click:e.triggerTrackFinder}},[r("span",{attrs:{"aria-hidden":"true"}},[e._v("Ã—")])])])}),[],!1,null,"3621d1a0",null);t.default=component.exports},422:function(e,t,r){"use strict";r(407)},423:function(e,t,r){var n=r(113)(!1);n.push([e.i,".flex-column[data-v-7d0e2651],.flex-row[data-v-7d0e2651]{display:flex}.middle-center[data-v-7d0e2651]{justify-content:center;align-items:center}.stretch-center[data-v-7d0e2651]{justify-content:center;align-items:stretch}.fill-screen[data-v-7d0e2651]{width:100%;height:100vh}#video-subs[data-v-7d0e2651]{bottom:0;pointer-events:none}#track-finder-button[data-v-7d0e2651]{right:1.5rem;top:4rem}",""]),e.exports=n},432:function(e,t,r){"use strict";r.r(t);r(5),r(4),r(2),r(6),r(7);var n=r(0),c=r(27),o=(r(147),r(1),r(394),r(143),r(3),r(67),r(112)),d=r(384),l=r(389),f=r(396);function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function m(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var h=Object(o.b)({setup:function(){var e=Object(o.i)(),t=Object(o.j)(),r=e.value.query.videoId,video=Object(o.e)(null),n=Object(o.h)().$api,v=Object(o.e)(null),h=Object(o.a)((function(){var e;return null===(e=v.value)||void 0===e?void 0:e.player})),cursor=Object(o.e)(0),k=Object(o.e)([]),O=Object(o.e)(!1),x=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n(Object(d.b)(r))();case 3:video.value=e.sent,e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(0),"Not Authenticated"!==e.t0){e.next=11;break}return t.push("/"),e.abrupt("return");case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t){var track,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(!k.value.find((function(e){return e._id===t}))){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,n(Object(l.b)(t))();case 7:return track=e.sent,e.next=10,n(Object(l.c)(t))();case 10:r=e.sent,k.value.push(m(m({},track),{},{subs:f.a.fromInfos(r)}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:(r=k.value.findIndex((function(e){return e._id===t})))>=0&&k.value.splice(r,1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=h.value)||void 0===t?void 0:t.getCurrentTime();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=0;case 5:cursor.value=e.t0;case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function e(){y(),k.value.forEach((function(e){return e.subs.setActive(cursor.value)})),window.requestAnimationFrame(e)};return Object(o.d)((function(){x(),w()})),{videoId:r,youtube:v,video:video,tracks:k,showTrackFinder:O,addTrack:T,removeTrack:j,triggerTrackFinder:function(){O.value=!O.value}}}}),k=h,O=(r(422),r(77)),component=Object(O.a)(k,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"fill-screen flex-column position-relative bg-dark text-white"},[r("div",{staticClass:"position-relative flex-fill",attrs:{id:"player"}},[r("youtube",{ref:"youtube",attrs:{"video-id":e.video?e.video.handle:"",resize:"",width:"100%",height:"100%",resizeDelay:1,fitParent:""}}),r("div",{staticClass:"w-100 position-absolute text-center h3",attrs:{id:"video-subs"}},e._l(e.tracks,(function(t){return r("div",e._l(t.subs.data.filter((function(e){return e.active})).reverse(),(function(sub){return r("div",[e._v(e._s(sub.text))])})),0)})),0)],1),e.showTrackFinder?r("ViewTrackFinder",{attrs:{videoId:e.videoId,tracks:e.tracks,triggerTrackFinder:e.triggerTrackFinder,addTrack:e.addTrack,removeTrack:e.removeTrack}}):e._e(),r("button",{staticClass:"btn btn-secondary position-absolute m-1",attrs:{id:"track-finder-button"},on:{click:e.triggerTrackFinder}},[e._v("Add Track")])],1)}),[],!1,null,"7d0e2651",null);t.default=component.exports;installComponents(component,{ViewTrackFinder:r(415).default})}}]);