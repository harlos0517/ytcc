(window.webpackJsonp=window.webpackJsonp||[]).push([[19,11,12],{384:function(e,t,n){"use strict";n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return f}));var r=n(48),c=function(){return Object(r.axiosRequest)(r.METHODS.POST,"/video")},o=function(e){return Object(r.axiosRequest)(r.METHODS.GET,"/video/".concat(e,"/tracks/public"))},d=function(){return Object(r.axiosRequest)(r.METHODS.GET,"/videos/me")},l=function(e){return Object(r.axiosRequest)(r.METHODS.GET,"/video/"+e)},f=function(e){return Object(r.axiosRequest)(r.METHODS.GET,"/video/".concat(e,"/tracks"))}},388:function(e,t,n){var content=n(393);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(114).default)("f62ec356",content,!0,{sourceMap:!1})},390:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return f}));var r=n(48),c=function(e){return Object(r.axiosRequest)(r.METHODS.GET,"/track/"+e)},o=function(e){return Object(r.axiosRequest)(r.METHODS.GET,"/track/".concat(e,"/infos"))},d=function(){return Object(r.axiosRequest)(r.METHODS.POST,"/track")},l=function(){return Object(r.axiosRequest)(r.METHODS.PUT,"/track")},f=function(e){return Object(r.axiosRequest)(r.METHODS.DELETE,"/track/"+e)}},391:function(e,t,n){"use strict";var r=n(9),c=n(79).findIndex,o=n(89),d="findIndex",l=!0;d in[]&&Array(1).findIndex((function(){l=!1})),r({target:"Array",proto:!0,forced:l},{findIndex:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}}),o(d)},392:function(e,t,n){"use strict";n(388)},393:function(e,t,n){var r=n(113)(!1);r.push([e.i,".flex-column[data-v-46f3de0d],.flex-row[data-v-46f3de0d]{display:flex}.middle-center[data-v-46f3de0d]{justify-content:center;align-items:center}.stretch-center[data-v-46f3de0d]{justify-content:center;align-items:stretch}.fill-screen[data-v-46f3de0d]{width:100%;height:100vh}#video-subs[data-v-46f3de0d]{bottom:0;pointer-events:none}#video-subs span[data-v-46f3de0d]{background-color:rgba(0,0,0,.73333);border-radius:5px}",""]),e.exports=r},397:function(e,t,n){var content=n(411);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(114).default)("02ccf3ca",content,!0,{sourceMap:!1})},399:function(e,t,n){"use strict";n.r(t);var r=n(27),c=(n(67),n(112)),o=n(149),d=Object(c.b)({props:{videoId:{type:String,required:!0},activeSubs:{type:Array,required:!0},changeState:{type:Function,required:!0},playing:{type:Function,default:null},ready:{type:Function,default:null},paused:{type:Function,default:null},ended:{type:Function,default:null},buffering:{type:Function,default:null},cued:{type:Function,default:null}},setup:function(e){var t=Object(c.g)(e),n=t.changeState,d=t.playing,l=t.ready,f=t.paused,v=t.ended,m=t.buffering,h=t.cued,y=Object(c.e)(null),x=Object(c.a)((function(){var e;return null===(e=y.value)||void 0===e?void 0:e.player})),O=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,null===(r=x.value)||void 0===r?void 0:r.getPlayerState();case 3:if(e.t1=e.sent,e.t1){e.next=6;break}e.t1=o.a.UNSTARTED;case 6:e.t2=e.t1,e.t0.value.call(e.t0,e.t2),l.value&&l.value();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.value(o.a.VIDEO_CUED),h.value&&h.value();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{youtube:y,player:x,onReady:O,onPlaying:function(e){n.value(o.a.PLAYING),d.value&&d.value()},onPaused:function(e){n.value(o.a.PAUSED),f.value&&f.value()},onEnded:function(e){n.value(o.a.ENDED),v.value&&v.value()},onBuffering:function(e){n.value(o.a.BUFFERING),m.value&&m.value()},onCued:k}}}),l=d,f=(n(392),n(77)),component=Object(f.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"position-relative flex-fill",attrs:{id:"video-view"}},[n("youtube",{ref:"youtube",attrs:{"video-id":e.videoId,resize:"",width:"100%",height:"100%",resizeDelay:1,fitParent:""},on:{playing:e.onPlaying,ready:e.onReady,paused:e.onPaused,ended:e.onEnded,buffering:e.onBuffering,cued:e.onCued}}),n("div",{staticClass:"w-100 position-absolute text-center h3",attrs:{id:"video-subs"}},e._l(e.activeSubs,(function(sub){return n("div",[n("span",[e._v(e._s(sub.text))])])})),0)],1)}),[],!1,null,"46f3de0d",null);t.default=component.exports},400:function(e,t,n){"use strict";var r=n(9),c=n(401),o=n(46),d=n(55),l=n(72),f=n(147);r({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=o(this),n=d(t),r=f(t,0);return r.length=c(r,t,t,n,0,void 0===e?1:l(e)),r}})},401:function(e,t,n){"use strict";var r=n(11),c=n(115),o=n(55),d=n(40),l=r.TypeError,f=function(e,t,source,n,r,v,m,h){for(var element,y,x=r,O=0,k=!!m&&d(m,h);O<n;){if(O in source){if(element=k?k(source[O],O,t):source[O],v>0&&c(element))y=o(element),x=f(e,t,element,y,x,v-1)-1;else{if(x>=9007199254740991)throw l("Exceed the acceptable array length");e[x]=element}x++}O++}return x};e.exports=f},402:function(e,t,n){n(89)("flat")},403:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(34),c=n(35),o=(n(19),n(143),n(391),n(1),n(3),function(){function e(data){Object(r.a)(this,e),this.data=[],data&&this.insertMany(data)}return Object(c.a)(e,[{key:"insertMany",value:function(e){return e.map(this.insert.bind(this))}},{key:"insert",value:function(sub){var e=sub._id,t=sub.startTime,n=sub.endTime,text=sub.text;if(void 0===n)throw new TypeError("Invalid end time.");for(var r={_id:e,startTime:t,endTime:n,text:text,next:null,prev:null,active:!1},c=null,o=this.data[0]||null,i=0;o&&o.endTime<=r.endTime;)c=o,o=o.next||null,i++;o&&(r.endTime=Math.min(r.endTime,o.startTime));var d=c?c.endTime:0;return r.startTime=Math.max(d,r.startTime),r.endTime-r.startTime<.1?(console.error("Time segment too small."),null):(r.next=o,r.prev=c,c&&(c.next=r),o&&(o.prev=r),this.data.splice(i,0,r),r)}},{key:"delete",value:function(sub){var i=this.data.findIndex((function(s){return s._id===sub._id}));if(i<0)throw new Error("This sub does not exist on this Subtitles.");sub.next&&(sub.next.prev=sub.prev),sub.prev&&(sub.prev.next=sub.next),this.data.splice(i,1)}},{key:"setActive",value:function(time){this.data.forEach((function(sub){sub.active=time>=sub.startTime&&time<sub.endTime}))}}],[{key:"fromInfos",value:function(e){return new this(e.map((function(e){return{_id:e._id,startTime:e.startTime,endTime:e.endTime||0,text:e.text}})))}}]),e}())},410:function(e,t,n){"use strict";n(397)},411:function(e,t,n){var r=n(113)(!1);r.push([e.i,".flex-column[data-v-3621d1a0],.flex-row[data-v-3621d1a0]{display:flex}.middle-center[data-v-3621d1a0]{justify-content:center;align-items:center}.stretch-center[data-v-3621d1a0]{justify-content:center;align-items:stretch}.fill-screen[data-v-3621d1a0]{width:100%;height:100vh}#track-finder[data-v-3621d1a0]{left:20%;right:20%;top:10%;bottom:10%;background-color:rgba(0,0,0,.86667);z-index:20}#track-finder>.wrap[data-v-3621d1a0]{max-height:100%;overflow:auto}#track-finder #track-finder-close[data-v-3621d1a0]{right:1.5rem;top:1rem}",""]),e.exports=r},415:function(e,t,n){var content=n(433);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(114).default)("3ed40209",content,!0,{sourceMap:!1})},423:function(e,t,n){"use strict";n.r(t);var r=n(27),c=(n(67),n(112)),video=n(384),o=Object(c.b)({props:{videoId:{type:String,required:!0},tracks:{type:Array,required:!0},triggerTrackFinder:{type:Function,required:!0},addTrack:{type:Function,required:!0},removeTrack:{type:Function,required:!0}},setup:function(e){var t=Object(c.h)().$api,n=Object(c.g)(e).videoId,o=Object(c.e)([]),d=Object(c.e)("");return Object(c.d)(Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(Object(video.c)(n.value))();case 2:o.value=e.sent;case 3:case"end":return e.stop()}}),e)})))),{trackList:o,selectedTrackId:d}}}),d=(n(410),n(77)),component=Object(d.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"position-absolute rounded",attrs:{id:"track-finder"}},[n("div",{staticClass:"wrap p-5"},[n("div",{staticClass:"row mb-3 mx-0"},[n("div",{staticClass:"col px-0"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedTrackId,expression:"selectedTrackId"}],staticClass:"w-100 h-100",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.selectedTrackId=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:""}},[e._v("Please Select")]),e._l(e.trackList,(function(track){return n("option",{domProps:{value:track._id}},[e._v(e._s(track.name)+" - "+e._s(track.user.email))])}))],2)]),n("div",{staticClass:"col-auto px-0"},[n("button",{staticClass:"btn btn-primary",on:{click:function(t){return e.addTrack(e.selectedTrackId)}}},[e._v("ADD")])])]),e._l(e.tracks,(function(track){return n("div",{staticClass:"row mb-3"},[n("div",{staticClass:"col d-flex align-items-center"},[n("span",[e._v(e._s(track.name))])]),n("div",{staticClass:"col-auto"},[n("button",{staticClass:"btn btn-danger",on:{click:function(t){return e.removeTrack(track._id)}}},[e._v("REMOVE")])])])}))],2),n("button",{staticClass:"btn-close close btn-close-white position-absolute",attrs:{id:"track-finder-close",type:"button","aria-label":"Close"},on:{click:e.triggerTrackFinder}},[n("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])])}),[],!1,null,"3621d1a0",null);t.default=component.exports},432:function(e,t,n){"use strict";n(415)},433:function(e,t,n){var r=n(113)(!1);r.push([e.i,".flex-column[data-v-7fc55529],.flex-row[data-v-7fc55529]{display:flex}.middle-center[data-v-7fc55529]{justify-content:center;align-items:center}.stretch-center[data-v-7fc55529]{justify-content:center;align-items:stretch}.fill-screen[data-v-7fc55529]{width:100%;height:100vh}#video-subs[data-v-7fc55529]{bottom:0;pointer-events:none}#video-subs span[data-v-7fc55529]{background-color:rgba(0,0,0,.73333);border-radius:5px}#track-finder-button[data-v-7fc55529]{right:1.5rem;top:4rem}",""]),e.exports=r},442:function(e,t,n){"use strict";n.r(t);n(5),n(4),n(6),n(7);var r=n(0),c=n(27),o=(n(67),n(400),n(402),n(19),n(2),n(1),n(148),n(391),n(143),n(3),n(112)),d=n(384),l=n(390),f=n(403);function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function m(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var h=Object(o.b)({setup:function(){var e=Object(o.i)(),t=Object(o.j)(),n=e.value.query.videoId,video=Object(o.e)(null),r=Object(o.h)().$api,v=Object(o.e)(null),h=Object(o.a)((function(){var e;return null===(e=v.value)||void 0===e?void 0:e.player})),cursor=Object(o.e)(0),y=Object(o.e)([]),x=Object(o.a)((function(){return y.value.map((function(e){return e.subs.data.filter((function(e){return e.active})).reverse()})).flat()})),O=Object(o.e)(!1),k=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r(Object(d.b)(n))();case 3:video.value=e.sent,e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(0),"Not Authenticated"!==e.t0){e.next=11;break}return t.push("/"),e.abrupt("return");case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t){var track,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(!y.value.find((function(e){return e._id===t}))){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,r(Object(l.b)(t))();case 7:return track=e.sent,e.next=10,r(Object(l.c)(t))();case 10:n=e.sent,y.value.push(m(m({},track),{},{subs:f.a.fromInfos(n)}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:(n=y.value.findIndex((function(e){return e._id===t})))>=0&&y.value.splice(n,1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=h.value)||void 0===t?void 0:t.getCurrentTime();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=0;case 5:cursor.value=e.t0;case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function e(){w(),y.value.forEach((function(e){return e.subs.setActive(cursor.value)})),window.requestAnimationFrame(e)};return Object(o.d)((function(){k(),E()})),{videoId:n,playerRef:v,player:h,video:video,tracks:y,activeSubs:x,showTrackFinder:O,addTrack:T,removeTrack:j,triggerTrackFinder:function(){O.value=!O.value}}}}),y=h,x=(n(432),n(77)),component=Object(x.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fill-screen flex-column position-relative bg-dark text-white"},[n("VideoView",{ref:"playerRef",attrs:{videoId:e.video?e.video.handle:"",activeSubs:e.activeSubs,changeState:function(){}}}),e.showTrackFinder?n("ViewTrackFinder",{attrs:{videoId:e.videoId,tracks:e.tracks,triggerTrackFinder:e.triggerTrackFinder,addTrack:e.addTrack,removeTrack:e.removeTrack}}):e._e(),n("button",{staticClass:"btn btn-secondary position-absolute m-1",attrs:{id:"track-finder-button"},on:{click:e.triggerTrackFinder}},[e._v("Add Track")])],1)}),[],!1,null,"7fc55529",null);t.default=component.exports;installComponents(component,{VideoView:n(399).default,ViewTrackFinder:n(423).default})}}]);